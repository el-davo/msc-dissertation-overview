\begin{abstract}
Microservices are currently the hot new technology for the web, they allow us to break up our otherwise monolithic architecture into much smaller more focused services. This has a lot of benefits, such as reducing system size and increasing release frequency and agility. 

Microservices are not without their flaws. For example, When a particular microservice crashes it can be difficult and time consuming to find the root cause. Typically a developer would start their analysis by checking the logs of the failed service. This can be a lengthy process and potentially lead to a misdiagnoses. The reason is that the developer is not seeing the full picture. For example, the failure on service A could be a direct result of a problem that originated on service B. It is also possible that the root cause could be concealing itself in some convoluted log message that a typical developer could misinterpret. Due to the nature of microservices encouraging continuous deployment it is also possible that a crash was as a direct result of a service deployment at a particular point in time. 

This paper will focus mainly on root cause analysis of microservices deployed to a popular PaaS called Pivotal Cloud Foundry.

\end{abstract}

\chapter{Research Context}
\lhead{\emph{Research Context}}

Root cause analysis of systems can be a complex task. The emergence of distributed architectures such as microservices has presented many new challenges in this area. Log file analysis is a key contributor to many RCA systems. This is hardly surprising as logs are often the first place a developer will look in order to diagnose faults. To have an effective log analyser we need to take into account that logs can come from multiple services written in many different languages such as Node.js and Java. These logs need to be analysed in real time, and potentially lead to many Gigabytes of data passing through the system. On top of all that the log analyser needs to be able identify the root causes and present its findings with minimal latency. 

There has been a lot of research on the topic of log analysis. Most argue that this is firmly a big data problem and tools such as Apache Spark\cite{8067504} or Apache Kafka\cite{adamson2014combined} would be required to allow for a real time analysis. Machine learning has also been put forward as a method for detecting anomalies in systems. An anomaly detection system for Web log files has been proposed. This system adopts a two-level machine learning algorithm, the decision tree algorithm and HMM, which can detect anomalous data and spot unknown attacks\cite{8322600}.

While log analysis is an effective tool for RCA, there are some events that are hard to capture. For instance they do rely a lot on the fact the services log meaningful messages, its not entirely infeasible that a service may log nothing at all. It is also hard to detect from the logs the exact state of the service at any given time, such as memory capacity and CPU usage. Microservices encourage rapid continuous deployments\cite{villamizar2015evaluating}. A deployment could be viewed as a planned killing of a service and replaced with the new service. Log analysis tools may be tricked in this instance and incorrectly report that a service has crashed. 

Pivotal Cloud Foundry\cite{6924673} (PCF) has become a popular platform as a service (PaaS) over the last few years. It makes working with microservices much easier with features including zero downtime blue/green deployments, auto-scaling and access to a multitude of third-party services like MySQL and RabbitMQ.

Cloud Foundry has a rich public API which can give us a lot of extra data on the state of our environment, for example it is possible to get the language a service was written in by interrogating build-pack types, if we know the language it may make log analysis easier as, we can, in theory, apply a more targeted set of rules to our analysis for that specific language. PCF can also give us current memory and disk space usage of deployed applications as well as events that took place within a certain time-frame such as starting, stopping or crashing. With PCF it is also possible to send logs from any service to any user configured location. This is know as the logregator\cite{winn2017cloud}

Combining log analysis with Cloud Foundry rich API could eliminate some of the potential pitfalls of log analysis only solutions. 